# IntelliOptics 2.0 - Edge Deployment Environment Variables
# Copy this file to .env and fill in your values

# ====================
# Cloud Integration
# ====================

# IntelliOptics API token for cloud escalation
# Obtain from central web app: https://your-central-app.com/api/tokens
INTELLIOPTICS_API_TOKEN=your-api-token-here

# Central web app URL for escalations
# Format: https://your-central-app.com
CENTRAL_WEB_APP_URL=https://central-web-app.example.com

# ====================
# Database
# ====================

# PostgreSQL password for edge database (optional - only needed if using local detector metadata)
POSTGRES_PASSWORD=change-this-secure-password

# ====================
# SendGrid Email Alerts
# ====================

# SendGrid API key for escalation alerts
# Obtain from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.your-sendgrid-api-key-here

# From email address for alerts
SENDGRID_FROM_EMAIL=alerts@intellioptics.com

# Comma-separated list of recipient emails for escalation alerts
SENDGRID_ALERT_RECIPIENTS=quality-team@example.com,supervisor@example.com

# Escalation alert threshold (send email every N escalations)
SENDGRID_ALERT_BATCH_SIZE=10

# Escalation alert time interval (send email every N minutes, whichever comes first)
SENDGRID_ALERT_INTERVAL_MINUTES=30

# ====================
# Inference Configuration
# ====================

# Model repository path (leave as default unless using custom mount)
MODEL_REPOSITORY=/models

# Image size for inference (640 is standard for YOLO models)
IO_IMG_SIZE=640

# Global confidence threshold (can be overridden per detector in edge-config.yaml)
IO_CONF_THRESH=0.5

# NMS IOU threshold for object detection
IO_NMS_IOU=0.45

# ====================
# Logging
# ====================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ====================
# Edge Device Identity
# ====================

# Unique identifier for this edge device
# Used for tracking in central web app
EDGE_DEVICE_ID=edge-device-001

# Edge device location/name
EDGE_DEVICE_NAME=Factory Floor A - Line 1

# ====================
# Optional: Azure Integration (if using Azure Blob for image storage)
# ====================

# Azure Storage connection string (optional)
# AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=...

# Blob container name for images
# BLOB_CONTAINER_NAME=intellioptics-edge-images

# ====================
# Optional: Service Bus (if using for async escalation queue)
# ====================

# Azure Service Bus connection string (optional)
# SERVICE_BUS_CONN=Endpoint=sb://your-namespace.servicebus.windows.net/...

# Queue name for escalations
# ESCALATION_QUEUE_NAME=image-escalations

# ====================
# Advanced Configuration
# ====================

# Enable offline mode (no cloud escalation, local processing only)
# OFFLINE_MODE=false

# Model refresh interval (seconds) - how often to check for model updates
# MODEL_REFRESH_INTERVAL=60

# Maximum models to keep in cache
# CACHE_MAX_MODELS=5

# Health check port for inference service
# HEALTH_PORT=8081
